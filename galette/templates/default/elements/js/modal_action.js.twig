{% if selector is not defined %}
    {% set selector = '.single-custom-action' %}
{% endif %}
{% if method is not defined %}
    {% set method = 'GET' %}
{% endif %}
{% if datatype is not defined %}
    {% set datatype = 'html' %}
{% endif %}
{% if loader is not defined %}
    {% set loader = 'action' %}
    {% set loader_text = (loader_text is defined) ? loader_text : _T('Loading...') %}
{% endif %}
{% if loader_selector is not defined %}
    {% set loader_selector = '.loader_selector' %}
{% endif %}
            $('{{ selector }}').click(function(event) {
                event.preventDefault();
                var _this = $(this);
                var _url = _this.attr('href');
                $.ajax({
                    url: {% if actionurl is not defined %}_url{% else %}'{{ actionurl|raw }}'{% endif %},
                    type: "{{ method }}",
                    datatype: "{{ datatype }}",
                    {% include "elements/js/loader.js.twig" with {
                        loader: loader,
                        selector: loader_selector,
                        loader_text: loader_text
                    } %},
                    success: function(res) {
{% if extra_success is defined %}
                        {{ extra_success|raw }}
{% endif %}
                        $.modal({
                            title: '{{ modaltitle }}',
                            class: 'modal-form{% if modal_class is defined %} {{ modal_class }}{% endif %}',
                            classContent: '{% if modalcontent_class is defined %}{{ modalcontent_class }}{% endif %}',
                            content: res,
                            onApprove: function() {
{% if modalapprove is defined %}
                                {{ modalapprove|raw }}
{% else %}
                                $('.modal-form form').submit();
{% endif %}
                            },
                            actions: [{
                                text    : '{% if approve_text is not defined %}{{ _T("Save")|e("js") }}{% else %}{{ approve_text }}{% endif %}',
                                icon   : 'save',
                                class   : 'primary icon labeled approve'
                            }, {
                                text    : '{{ _T("Close")|e("js") }}',
                                icon   : 'times',
                                class   : 'icon labeled cancel'
                            }],
                            className: {
                                title: 'primary header'
                            }
                        }).modal('show');
                    },
                    error: function() {
                        alert("{{ _T("An error occurred :(")|e("js") }}");
                    }
                });
            });
