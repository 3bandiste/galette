{% set selector = (selector is defined) ? selector : ".single-custom-action" %}
{% set method = (method is defined) ? method : "GET" %}
{% set datatype = (datatype is defined) ? datatype : "html" %}
{% set datatype = (datatype is defined) ? datatype : "html" %}
{% if loader is not defined %}
    {% set loader = 'action' %}
    {% set loader_text = (loader_text is defined) ? loader_text : _T('Loading...') %}
{% endif %}
{% set loader_selector = (loader_selector is defined) ? loader_selector : ".loader_selector" %}

{% set modaltitle = (modaltitlefromjs is defined) ? modaltitlefromjs : modaltitle %}
{% set modalcontent = (modalcontent is defined) ? modalcontent : "res" %}
{% set modal_class = (modal_class is defined) ? modal_class : null %}
{% set modalcontent_class = (modalcontent_class is defined) ? modalcontent_class : null %}
{% set modalapprove = (modalapprove is defined) ? modalapprove : null %}
{% set approve_text = (approve_text is defined) ? approve_text : _T("Save")|e("js") %}
{% set approve_icon = (approve_icon is defined) ? approve_icon : "save" %}
{% set approve_color = (approve_color is defined) ? approve_color : "primary" %}
{% set cancel_text = (cancel_text is defined) ? cancel_text : _T("Close")|e("js") %}
{% set cancel_icon = (cancel_icon is defined) ? cancel_icon : "times" %}
{% set cancel_color = (cancel_color is defined) ? cancel_color : null %}
{% set modalclassname = (modalclassname is defined) ? modalclassname : null %}

    $('{{ selector }}').click(function(event) {
        event.preventDefault();
        var _this = $(this);
        var _url = _this.attr('href');
        $.ajax({
            url: {% if actionurl is not defined %}_url{% else %}'{{ actionurl|raw }}'{% endif %},
            type: "{{ method }}",
            datatype: "{{ datatype }}",
            {% include "elements/js/loader.js.twig" with {
                loader: loader,
                selector: loader_selector,
                loader_text: loader_text
            } %},
            success: function(res) {
{% if extra_success is defined %}
                {{ extra_success|raw }}
{% endif %}
                {% include "elements/js/modal.js.twig" with {
                    modaltitle: modaltitle,
                    modalcontent: modalcontent,
                    modal_class: modal_class,
                    modalcontent_class: modalcontent_class,
                    modalapprove: modalapprove,
                    approve_text: approve_text,
                    approve_icon: approve_icon,
                    approve_color: approve_color,
                    cancel_text: cancel_text,
                    cancel_icon: cancel_icon,
                    cancel_color: cancel_color,
                    modalclassname: modalclassname,
                } %}
            },
            error: function() {
                alert("{{ _T("An error occurred :(")|e("js") }}");
            }
        });
    });
