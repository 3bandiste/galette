{% set selector = selector is defined ? selector : ".single-custom-action" %}
{% set method = method is defined ? method : "GET" %}
{% set datatype = datatype is defined ? datatype : "html" %}
{% if loader is not defined %}
    {% set loader = 'action' %}
    {% set loader_text = loader_text is defined ? loader_text : _T('Loading...') %}
{% endif %}
{% set loader_selector = loader_selector is defined ? loader_selector : ".loader_selector" %}

{% set modal_title = modal_title_twig is defined ? modal_title_twig : modal_title %}
{% set modal_content = modal_content_twig is defined ? modal_content_twig : "res" %}
{% set modal_class = modal_class is defined ? modal_class : null %}
{% set modal_content_class = modal_content_class is defined ? modal_content_class : null %}
{% set modal_onapprove = modal_onapprove is defined ? modal_onapprove : null %}
{% set modal_approve_text = modal_approve_text is defined ? modal_approve_text : _T("Save")|e("js") %}
{% set modal_approve_icon = modal_approve_icon is defined ? modal_approve_icon : "save" %}
{% set modal_cancel_text = modal_cancel_text is defined ? modal_cancel_text : _T("Close")|e("js") %}

    $('{{ selector }}').click(function(event) {
        event.preventDefault();
        var _this = $(this);
        var _url = _this.attr('href');
        $.ajax({
            url: {% if actionurl is not defined %}_url{% else %}'{{ actionurl|raw }}'{% endif %},
            type: "{{ method }}",
            datatype: "{{ datatype }}",
            {% include "elements/js/loader.js.twig" with {
                loader: loader,
                selector: loader_selector,
                loader_text: loader_text
            } %},
            success: function(res) {
{% if extra_success is defined %}
                {{ extra_success|raw }}
{% endif %}
                {% include "elements/js/modal.js.twig" with {
                    modal_title: modal_title,
                    modal_content: modal_content,
                    modal_class: modal_class,
                    modal_content_class: modal_content_class,
                    modal_onapprove: modal_onapprove,
                    modal_approve_text: modal_approve_text,
                    modal_approve_icon: modal_approve_icon,
                    modal_cancel_text: modal_cancel_text,
                } %}
            },
            error: function() {
                alert("{{ _T("An error occurred :(")|e("js") }}");
            }
        });
    });
