{% extends 'page.html.twig' %}

{% block content %}
        <div class="ui stackable pointing inverted menu">
{% for m in models %}
            <a href="{{ url_for('pdfModels', {'id': m.id}) }}" class="item{% if m.id == model.id %} active{% endif %}" data-tab="{{ m.id }}">{{ m.name }}</a>
{% endfor %}
        </div>
{% for m in models %}
        <div class="ui {% if m.id == model.id %} active{% endif %} tab segment" data-tab="{{ loop.index }}">
    {% if m.id == model.id %}
        {% include 'elements/edit_pdf_models.html.twig' %}
    {% endif %}
        </div>
{% endfor %}
{% endblock %}

{% block javascripts %}
        <script type="text/javascript">
            $(function() {
                $('.pointing.menu .item').tab({
                    auto: true,
                    alwaysRefresh: true,
                    path: '{{ url_for('pdfModels', {'id': ''}) }}',
                    onLoad: function(tabPath, parameterArray, historyEvent) {
                        $('.note-editor').remove();
                        _initCodeEditor();
                        _addLegendButton('.field:not(.nolegend) .note-toolbar');
                        _handleLegend(tabPath);
                    }
                });
            });

            function _initCodeEditor() {
                $('.codeeditor').summernote({
                    lang: '{{ i18n.getID()|replace({'_': '-'}) }}',
                    disableDragAndDrop: true,
                    height: 240,
                    toolbar: [
                        ['view', ['codeview']]
                    ],
                    callbacks: {
                        onImageUpload: function(data) {
                            //prevent image copypaste
                            data.pop();
                        }
                    }
                });
                $('.codeeditor').next().find(".note-editable").attr("contenteditable", false);
            }
            _initCodeEditor();

            _addLegendButton('.field:not(.nolegend) .note-toolbar');
            _handleLegend();
        </script>
{% endblock %}
